import{_ as e,c as i,o as t,ae as a}from"./chunks/framework.BFe6FF_l.js";const n="/blog/assets/snippets-1.P-WJkijx.png",o="/blog/assets/snippets-2.DScLeU9p.png",p="/blog/assets/snippets-3.Bt1dVIsq.png",l="/blog/assets/snippets-4.DZoeoLo9.png",m=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"note/vscode/snippets.md","filePath":"note/vscode/snippets.md"}'),d={name:"note/vscode/snippets.md"};function c(r,s,h,k,E,g){return t(),i("div",null,[...s[0]||(s[0]=[a('<h2 id="前言" tabindex="-1">前言 <a class="header-anchor" href="#前言" aria-label="Permalink to &quot;前言&quot;">​</a></h2><p><code>snippets</code> 意思是<strong>片段</strong>，在 <code>vscode</code> 中可以通过 <code>Snippets：Configure Snippets</code> 命令，可以定义<code>全局级（global）、项目级（Project）、语言级（Language）</code>代码片段，可以按照自定义的规则来快速生成一段代码，进而大幅提升我们的开发效率，可谓是开发提效利器。</p><h2 id="_1、如何创建-snippets" tabindex="-1">1、如何创建 snippets？ <a class="header-anchor" href="#_1、如何创建-snippets" aria-label="Permalink to &quot;1、如何创建 snippets？&quot;">​</a></h2><ol><li>第一步，在 vscode 按 <code>ctrl/command + shift + p</code>，输入 snippets，选择 <code>Snippets：Configure Snippets</code>，可以看到如下界面。</li></ol><p><img src="'+n+`" alt="图片加载失败"></p><p>可根据需要选择 snippets 的创建类型，一般选择 global 全局级别的 snippets 即可。</p><ol start="2"><li>第二步，选择 <code>New Global Snippets file</code>，输入文件名，按 <code>enter</code> 键，即进入 <code>snippets</code> 配置文件设置。</li></ol><p>snippets 文件以 JSON 编写，里面支持书写注释，并可定义无限数量的 snippets。</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;snippet&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	&quot;scope&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;javascript,typescript&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	&quot;prefix&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;snippet&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	&quot;body&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">		&quot;console.log(&#39;$1&#39;);&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	&quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a simple snippet&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><strong>prefix</strong>：必填，可以定义一个或多个触发词，由于子字符串匹配不是严格匹配的，类似正则匹配，比如输入 <code>ts</code> 可以匹配到 <code>test</code>。</li><li><strong>body</strong>：必填，表示正文，是一行或多行内容，插入时会合并为多行。换行和嵌入的标签页将根据插入摘要的上下文进行格式化。</li><li><strong>description</strong>：可选，表示片段的描述。</li><li><strong>scope</strong>：可选，表示支持的语言，默认支持所有。</li></ul><h2 id="_2、snippets-支持语法" tabindex="-1">2、snippets 支持语法 <a class="header-anchor" href="#_2、snippets-支持语法" aria-label="Permalink to &quot;2、snippets 支持语法&quot;">​</a></h2><h3 id="_2-1-光标控制" tabindex="-1">2.1 光标控制 <a class="header-anchor" href="#_2-1-光标控制" aria-label="Permalink to &quot;2.1 光标控制&quot;">​</a></h3><ul><li>在 body 正文，它里面可以使用占位符：<code>$0、$1、$2...</code>，代表光标位置，<code>$0</code> 代表光标最后停留的位置，<code>$1</code> 代表光标第一个停留的位置，<code>$2</code> 代表光标第二个停留的位置，以此类推，在使用 <code>prefix</code> 触发词触发词生成代码片段后，可使用 <code>Tab</code> 键跳转到光标位置。</li><li>同名光标可以同时使用多个，比如可以使用多个 <code>$1</code>，就可以实现<strong>多光标同时编辑</strong>。</li><li>光标也可以加上默认值，比如 <code>\${1：element}</code>，默认值为 <code>element</code>，如果触发词触发后，不输入任何内容，则光标位置默认为 <code>element</code>。</li><li>光标也可以提供多个值来选择，比如 <code>\${1|element1,element2,element3|}</code>，当按 <code>Tab</code> 键移动到对应光标时，会出现下拉框可供选择。</li></ul><p><img src="`+o+'" alt="图片加载失败"></p><h3 id="_2-2-variables-变量" tabindex="-1">2.2 Variables 变量 <a class="header-anchor" href="#_2-2-variables-变量" aria-label="Permalink to &quot;2.2 Variables 变量&quot;">​</a></h3><p>在 body 正文可以使用变量，语法是 <code>$name</code> 或 <code>${name：default}</code>。其中 <code>default</code> 表示默认值（占位符），当变量未知（即其名称未定义）时，会采用这个默认值。</p><p>vscode 中内置一些变量：</p><ul><li><code>${TM_FILENAME}</code>：当前文件名。</li><li><code>${TM_FILENAME_BASE}</code>：当前文件名（不带扩展名）。</li><li><code>${TM_DIRECTORY}</code>：当前文件所在目录。</li><li><code>${TM_FILEPATH}</code>：当前文件路径。</li><li><code>${RELATIVE_FILEPATH}</code>：当前文档的相对（相对于已打开的工作区或文件夹）文件路径。</li><li><code>${RELATIVE_FILEPATH}</code>：当前文档的相对（相对于已打开的工作区或文件夹）文件路径。</li><li><code>${CLIPBOARD}</code>：剪切板的内容。</li><li><code>${TM_SELECTED_TEXT}</code>：当前选择的文本或空字符串。</li><li><code>${CURRENT_SECONDS_UNIX}</code>：10位 unix 时间戳。</li><li>...等等。</li></ul><p>更多变量可查看<a href="https://code.visualstudio.com/docs/editing/userdefinedsnippets#_variables" target="_blank" rel="noreferrer">vscode snippets 官方文档</a>。</p><h3 id="_2-3-transform-变换" tabindex="-1">2.3 Transform 变换 <a class="header-anchor" href="#_2-3-transform-变换" aria-label="Permalink to &quot;2.3 Transform 变换&quot;">​</a></h3><p>还支持对变量做正则替换。</p><p>举个例子，变量 <code>${TM_FILENAME}</code> 是表示当前文件名，比如当前文件名为 <code>test.js</code>，使用 <code>&quot;${TM_FILENAME/[\\\\.]/_/}&quot;</code>，表示将文件名中的 <code>.</code> 替换为 <code>_</code>，会把 <code>test.js</code> 变成 <code>test_js</code>。</p><p>这个语法怎么理解呢？</p><p>拿 js 对比来说，比如当前字符串 s 为 <code>test.js</code>，使用正则替换 <code>s.replace(/(.+)\\.js/i, &#39;$1df&#39;)</code>，其输出结果为 <code>testdf</code>，而在 vscode 中，如果当前文件名为 <code>test.js</code>，使用 <code>${TM_FILENAME/(.+)\\\\.js/$1df/i}</code>，也能得到同样的结果。</p><p><strong>具体规则差异总结如下</strong>：</p><ul><li>也就是不用逗号分开，而改为 <code>/</code>。</li><li>在以前 <code>\\.js</code> 的正则语法中，需要增加一个 <code>\\</code> 表示再多转义一次，要不然会报错。</li></ul><h2 id="_3、多人项目协作时如何实现-snippets-共享" tabindex="-1">3、多人项目协作时如何实现 snippets 共享？ <a class="header-anchor" href="#_3、多人项目协作时如何实现-snippets-共享" aria-label="Permalink to &quot;3、多人项目协作时如何实现 snippets 共享？&quot;">​</a></h2><p>之前说过，snippets 可以定义在<strong>全局级、项目级、语言级</strong>，所以，如果多人协作时，可以把 snippets 定义在项目级，这样 vscode 在根目录生成配置配置，目录如下： <code>根目录/.vscode/[snippet名].code-snippets</code>，可以在这个文件提交到 <code>git</code> 仓库中，这样项目成员都可以共享该 <code>snippets</code> 了。</p><h2 id="_4、如何在-markdown-文件中使用-vscode-snippets" tabindex="-1">4、如何在 markdown 文件中使用 vscode snippets? <a class="header-anchor" href="#_4、如何在-markdown-文件中使用-vscode-snippets" aria-label="Permalink to &quot;4、如何在 markdown 文件中使用 vscode snippets?&quot;">​</a></h2><p>默认在 <code>vscode</code> 中，在<code>markdown</code> 文件编写内容是默认不支持 snippets 的，比如我平时写一些 <code>markdown</code> 表格时，会配置一个 <code>markdown</code> 表格的 <code>snippets</code>，但发现在 <code>markdown</code> 文件中输入触发词 <code>prefix</code> 根本无法使用。</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	&quot;md-table&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		&quot;prefix&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;md-table&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		&quot;body&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>\n<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">			&quot;| 列1标题 | 列2标题 | 列3标题 |&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">			&quot;|---------|---------|---------|&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">			&quot;| 内容A   | 内容B   | 内容C   |&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">			&quot;| 内容D   | 内容E   | 内容F   |&quot;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		],</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		&quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;markdown 表格&quot;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>后面发现可以手动插入 snippets。在 vscode 按 <code>ctrl/command + shift + p</code>，输入 snippets，选择 <code>Snippets：Insert Snippet</code>，就可以看到所有之前配置好对的 <code>snippets</code> 了，选择对应的 <code>snippet</code> 插入即可。</p><p><img src="'+p+'" alt="图片加载失败"></p><h2 id="小结" tabindex="-1">小结 <a class="header-anchor" href="#小结" aria-label="Permalink to &quot;小结&quot;">​</a></h2><ul><li>vscode 支持<code>全局级（global）、项目级（Project）、语言级（Language）</code>代码片段，一般个人使用的话为了方便，直接定义<code>全局级</code>即可，需要进行多人协助时，可使用<code>项目级</code> snippets，将生成的配置文件上传到 <code>git</code> 仓库即可。</li><li>snippets 支持语法：<strong>光标控制、Variables 变量、Transform 变换</strong>等语法，可按需使用。</li><li>markdown 中默认不支持 snippets，但可以通过手动插入 snippets 来使用。</li></ul><p>最后为了方便，snippets 配置文件的编写可以使用这个工具网站进行生成：<a href="https://snippet-generator.app/?description=&amp;tabtrigger=&amp;snippet=&amp;mode=vscode" target="_blank" rel="noreferrer">snippet-generator</a></p><p><img src="'+l+'" alt="图片加载失败"></p>',37)])])}const _=e(d,[["render",c]]);export{m as __pageData,_ as default};
