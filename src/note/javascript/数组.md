在 `JavaScript` 中如何判断一个对象是否为数组呢？

## JSON.stringify

`JSON.stringify(arr).startsWith('[')`

```js
const arr = [];
console.log(JSON.stringify(arr).startsWith('[')); // true
```

## Object.prototype.toString.call

```js
const arr = [];
console.log(Object.prototype.toString.call(arr) === '[object Array]'); // true
```

```js
const arr = {
  [Symbol.toStringTag]: 'Array'
}
console.log(Object.prototype.toString.call(arr) === '[object Array]'); // true
```

## instanceof
```js
console.log([] instanceof Array);      // true
console.log({} instanceof Array);      // false
```

```js
const arr = [];
Object.setPrototype(arr, Array.prototype);
console.log(arr instanceof Array); // true
```

```js
// 但跨 iframe/window 时可能失效
const iframe = document.createElement('iframe');
document.body.appendChild(iframe);
const iframeArray = iframe.contentWindow.Array;
const iframeArr = new iframeArray();
console.log(iframeArr instanceof Array);  
```

## constructor 属性

```js
console.log([].constructor === Array);  // true
console.log({}.constructor === Array);  // false
```

```js
// 注意：constructor 可以被修改
const arr = [];
arr.constructor = Object;
console.log(arr.constructor === Array); // false（被修改了）
```

## Array.isArray

```js
const arr = [];
console.log(Array.isArray(arr));  // true
```

优点：

ES5+ 标准方法，兼容性好（IE9+）

跨 iframe 也能正确识别

最可靠的方法


数组是一种数据结构：
1. 它是一种线性表数据结构，也就是它里面的数据是排成一条线一样的，它的数据只有前和后两个方向。除了数组，队列、栈、链接也是线性表数据结构。
2. 连续的内存空间。就是说数据中的元素在内存中是连续存储的，正是因为这个特性，所以数据可以实现“随机访问”，也就是访问数据中的每个元素花的时间就是一样的，时间复杂度都是O(1)，查询数据特别快。


Array.isArray 
1. C++ 编码实现，从 js 代码层面无法判断数据内部的存储结构，也就无法模拟实现。
2. 通过判断内部存储的数据结构是否符合数组的数据结构定义。

| 判断是否是数组的方法 | 优点 | 缺点 | 推荐度
|---------|---------|---------|---------|
| Array.isArray()   | 	标准、跨环境、最可靠   | 兼容性问题，只支持IE9+   | ⭐⭐⭐⭐⭐  |
| Object.prototype.toString.call()   | 最兼容、可靠  | 代码较长，并且可通过 Symbol.toStringTag 修改判断结果   | ⭐⭐⭐⭐   |
| instanceof   | 简单直观  | 通过 Object.setPrototype 修改原型后判断不准确，跨 iframe 失效   | ⭐⭐⭐   |
| constructor   | 简单  | 可被修改   | ⭐⭐  |
