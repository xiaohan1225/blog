---
title: 001 如何封装组件
date: 2021-08-05
categories:
  - 工作总结
tags:
  - 工作总结
sidebar: "auto"
---

## 前端组件化发展
- 早期对公共的js、css文件的抽离封装
- 根据业务逻辑来进行抽离，比如公共的页面头部、尾部等
- 以JQUI、easyUI、mini_UI以及ExtJS为代表的DOM封装——表现炫酷，但维护性差
- 前端MVVM模式的兴起，Vue、React、Angular三大框架的组件化思想——一切皆组件

## 组件封装的好处

1. 复用，提高开发效率。
2. 降低系统各个功能的耦合性，解耦(第三方库)，提高功能内部的聚合性
3. 降低颗粒度，可维护性高
4. 方便统一修改(UI 风格、交互方式等)

## 组件封装的难点
1. 同步性和个性化的处理
2. 组件之间的数据共享
3. 组件之间的时间传递
4. 开发人员的抽象能力、编码能力，使用规范问题

## 组件抽象的基本原则
- **单一性**

单一性要求组件具备高内聚、低耦合的特性，只需做好一件事情，避免与其它组件产生依赖关系。

- **复用性/通用性/扩展性**

设计组件时，要充分考虑复用性、通用性和扩展性，适用范围广，同时也可以预留出一些供扩展的接口，可以改变组件的内部逻辑，提供个性化扩展。

这里还有两种情况：
1. 可以在不同的项目之间使用的组件，称为基础组件/业务组件/公共组件.
2. 在项目内部使用，仅在当前场景下作为一个独立的模块抽取出来的组件，可以称之为项目组件。

公共组件和项目组件的侧重点不同，公共组件更看重其通用性，通过一个组件满足不同项目中相似的使用场景，而项目组件更多的是处理当前业务中的特殊场景，可能是页面拆解后的不同模块，也可能是不同操作的弹框，这种组件往往不适合直接嫁接到其它模块或项目中。所以对于一个组件来说，没不要为了追求通用性而使其很难维护。

## 分离处理

抽离组件时最好将业务层和视图层进行分离，视图层负责页面展示样式和交互，而业务层主要负责处理业务逻辑，比如接口调用，格式化数据等。其好处在于职责分离、提高组件性能。

## 组件的封装思路
1. 看封装的是公共组件还是项目组件，配置抽离
2. 该暴露哪些接口-可扩展性和灵活性
3. 封装的组件内部颗粒度不宜过大，合理拆分

## 如何保证组件的可靠性和可用性

1. 功能测试和单元测试
2. 编写详细易懂的 README 文档

<!-- ## 数据处理

- 响应数据处理(后端返回数据)
  lodash 函数式处理数据
  业务逻辑和结构相分离，模板里尽量不要写逻辑判断
  Select、Radio.Group 用 options 方式渲染
- 单向数据流(前端 js 数据)
- 数据不可变

1. vue 和 React 框架
   vue 的核心是数据响应式，数据变化驱动视图刷新，而 react 则提倡数据不可变(immutable)，每次 render 时用新数据替换老数据，方便数据回退。而两个框架提提倡单向数据流。
2. 小程序：避免 app.data 的滥用

## 代码规范和技巧

1. eslint、codeReview、TypeScript
2. 函数传递 3 个及以上参数 包装成一个对象
3. ref 的滥用
4. commit 规范: husky -->